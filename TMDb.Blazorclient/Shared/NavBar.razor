<link href="css/custom/NavBar.css" rel="stylesheet" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">

<nav class="navbar navbar-expand-lg navbar-light border-bottom-1">
    <div class="container-fluid container-lg px-4 px-lg-5">

        <div class="row" >
            <a class="navbar-brand" href="/" id="mainBranding" >TMDB - Taylor's Movie Database</a>
        </div>
        
        @* Self explantory *@
        <SearchBar/>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-between ms-2 border-2 border-top-0 border-bottom-0 border-end-0 border-dark" id="navbarSupportedContent">

            <div  class="nav-item ms-2" >
                <NavLink class="nav-link text-reset d-inline px-2 border-1 rounded" href="movies" Match="NavLinkMatch.All">Movies</NavLink>
                @*<NavLink class="nav-link text-reset d-inline px-2 border-1 rounded ms-1" href="movies" Match="NavLinkMatch.All">Movies</NavLink>
                <NavLink class="nav-link text-reset d-inline px-2 border-1 rounded ms-1" href="movies" Match="NavLinkMatch.All">Movies</NavLink>*@
            </div>
            
            @* This goes hand-in-hand with the section below. This is using .userMenuVanish *@
            <div class="btn-group">
              <div class="userMenuVanish" type="button" id="dropdownMenuClickableInside" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                  <Icon Name="IconName.Users" IconSize="IconSize.x2"></Icon>
              </div>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuClickableInside">
                <div class="">

                    <Switch TValue="bool" Checked="@isChecked" CheckedChanged="@OnThemeColorChanged" ></Switch>
                    <p class="d-inline" >Light/Dark Mode</p>

                    <NavBarUserBtns />

                </div>
              </div>
            </div>


            @* "d-lg-none" means it will not display until display size > lg (990px)*@
            <div class="d-lg-none card">

                <NavBarUserBtns />
                
                <div class="ms-2 card-footer">
                    <Switch TValue="bool" Checked="@isChecked" CheckedChanged="@OnThemeColorChanged"><p class="d-inline" >Light/Dark Mode</p></Switch>
                </div>
                

                

            </div>

        </div>

    </div>
</nav>



@code {

    private bool isChecked;


    Task OnThemeColorChanged(bool value)
    {
        isChecked = value;

        if ( isChecked )
        {
            Theme.ColorOptions.Primary = "#000000";
            Theme.ColorOptions.Secondary = "#FFFFFF";
        }
        else if ( !isChecked )
        {
            Theme.ColorOptions.Primary = "#FFFFFF";
            Theme.ColorOptions.Secondary = "#000000";
        }

        Theme.ThemeHasChanged();

        return Task.CompletedTask;
    }

    [CascadingParameter] Theme Theme { get; set; }

}
